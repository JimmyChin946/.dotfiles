#!/bin/bash
# Script to display battery status and percentage for i3blocks
# Usage: battery <BATTERY_ID> (e.g., battery BAT0)

BATTERY_ID=${1:-BAT0} # Default to BAT0 if no argument is given

STATUS=$(cat /sys/class/power_supply/${BATTERY_ID}/status)
CAPACITY=$(cat /sys/class/power_supply/${BATTERY_ID}/capacity)

if [ "$STATUS" = "Charging" ]; then
    ICON="CHR"
elif [ "$STATUS" = "Discharging" ]; then
    if (( CAPACITY <= 10 )); then
        ICON="LOW" # Low battery icon
    elif (( CAPACITY <= 30 )); then
        ICON="DIS"
    else
        ICON="DIS"
    fi
elif [ "$STATUS" = "Full" ]; then
    ICON="IDLE"
else
    ICON="IDLE" # Default icon
fi

echo "${ICON} (${CAPACITY})%"
exit 0

